[
  {
    "objectID": "webppl vs memo/xiang2023-exp1-round3.html",
    "href": "webppl vs memo/xiang2023-exp1-round3.html",
    "title": "",
    "section": "",
    "text": "code adapted from https://github.com/jczimm/competence_effort/blob/main/Code/main_text/exp1_simulation.R\nlibrary(tidyverse)\nlibrary(rwebppl)\n\njoint &lt;- data.frame(model = 'joint',\n                    agent = rep(c('A','B'), 18), \n                    scenario = c(rep('F,F;F,F',6),rep('F,F;F,L',6),rep('F,L;F,L',6),rep('F,F;L,L',6),rep('F,L;L,L',6),rep('L,L;L,L',6)),\n                    effort = 0, strength = 0,\n                    outcome = 0, prob = 0, round = rep(c(1,1,2,2,3,3), 6), \n                    reward = rep(c(10,10,20,20,20,20), 6))\njoint$prob[joint$round==1] = NaN\njoint$outcome = c(integer(6), integer(3),1,integer(2), 0,1,0,1,1,1, integer(2),integer(4)+1, 0,integer(5)+1, integer(6)+1)"
  },
  {
    "objectID": "webppl vs memo/xiang2023-exp1-round3.html#mcmc",
    "href": "webppl vs memo/xiang2023-exp1-round3.html#mcmc",
    "title": "",
    "section": "1 - mcmc",
    "text": "1 - mcmc\n\neffort_space_joint &lt;- \"var efforts = [0,0.05,0.1,0.15,0.2,0.25,0.3,0.35,0.4,0.45,0.5,0.55,0.6,0.65,0.7,0.75,0.8,0.85,0.9,0.95,1]\" # footnote: For computational tractability, we constrained the effort space to discrete values, ranging from 0 to 1 with increments of 0.05.\n\n## R3 Probability\nmdl1 &lt;- \"\nvar argMax = function(f, ar){\n  return maxWith(f, ar)[0]\n};\n\nvar alpha = 13.5, beta = 24.5\nvar weight = mem(function (box) {return 5})\nvar lowR = 10\nvar highR = 20\n\nvar lift = function(strength,box,effort){\n  return (effort*strength &gt;= weight(box))\n}\n\nvar optE = function(strength,box,reward) {\n  return argMax(\n    function(effort) {\n      if (strength.length &gt; 1)\n        {return reward*listMean(map(function(i){return lift(i,box,effort)}, strength)) - alpha*effort}\n        else \n          {return reward*lift(strength,box,effort) - alpha*effort}\n    },\n    efforts);\n};\n\nvar outcome = function(strength,box,reward) {\n  if (strength.length &gt; 1)\n    { var opt_effort = optE(strength,box,reward)\n      return listMean(map(function(i){return lift(i,box,opt_effort)}, strength))}\n  else \n  {return lift(strength,box,optE(strength,box,reward))}\n}\n\nvar x2a = [], x2b = []\nvar samples2 = Infer({ method: 'MCMC', kernel: 'MH', samples: 10000, burn: 1000, model() {\n  var sa = uniform(1,10)\n  var sb = uniform(1,10)\n  condition(outcome(sa,'box',lowR) == \"\nmdl2 &lt;- \")\n  condition(outcome(sb,'box',lowR) == \"\nmdl3 &lt;- \")\n  condition(outcome(sa,'box',highR) == \"\nmdl4 &lt;- \")\n  condition(outcome(sb,'box',highR) == \"\nmdl5 &lt;- \")\n  x2a.push(sa)\n  x2b.push(sb)\n  return 0\n}})\n\nvar jointUtility = function(init_effort,a_strength,b_strength){\n  var r3_reward = highR // round 3 reward\n  \n  var lift2 = function(strength,strength2,box,effort,effort2){\n    return (effort*strength + effort2*strength2) &gt;= weight(box)\n  }\n\n  var gini = function(effort, effort2) {return (effort == effort2 ? 0 : Math.abs(effort-effort2)/4/(effort+effort2))}\n  // For the Maximum effort model, the Gini coefficient is always 0, so it is fine to keep this term in here for the maximum effort model.\n  \n  var a = function(depth,reward) {\n      var effort2 = b(depth - 1,reward)\n      var optEffort = function(strength,strength2,box,reward) {\n        return argMax(\n          function(effort) {\n            if (a_strength.length &gt; 1) {\n              return reward*listMean(map2(function(i,j){return lift2(i,j,box,effort,effort2)}, strength,strength2)) - alpha*effort - beta*gini(effort,effort2)\n            } else {\n              return reward*lift2(strength,strength2,box,effort,effort2) - alpha*effort - beta*gini(effort,effort2)\n            }\n          },\n          efforts);\n      };\n    return optEffort(a_strength,b_strength,'box',reward)\n  }\n  \n  var b = function(depth,reward) {\n      var effort2 = depth===0 ? init_effort : a(depth,reward)\n      var optEffort = function(strength,strength2,box,reward) {\n        return argMax(\n          function(effort) {\n            if (a_strength.length &gt; 1) {\n              return reward*listMean(map2(function(i,j){return lift2(i,j,box,effort,effort2)}, strength,strength2)) - alpha*effort - beta*gini(effort,effort2)\n            } else {\n              return reward*lift2(strength,strength2,box,effort,effort2) - alpha*effort - beta*gini(effort,effort2)\n            }\n          },\n          efforts);\n      };\n    return optEffort(b_strength,a_strength,'box',reward)\n  }\n  \n  var findDepth = function(x) { // find the depth that is needed to converge\n     if (Math.abs(b(x,r3_reward) - b(x+1,r3_reward)) &lt; 0.06) {\n       return x;\n     } else {\n       return -1;\n     }\n   };\n\n  var ds = [1,2,5,10]; // if converges in 1 round, then depth = 1; if not, then try 2, 5, 10.\n  var d = function() {\n     if (findDepth(ds[0]) &gt; 0) {\n       return ds[0]\n     } else if (findDepth(ds[1]) &gt; 0) {\n       return ds[1]\n     } else if (findDepth(ds[2]) &gt; 0) {\n       return ds[2]\n     } else if (findDepth(ds[3]) &gt; 0) {\n       return ds[3]\n     } else {\n       display('Effort could not converge in ' + ds[3] + ' iterations. Increase the number of iterations and try again.')\n     }\n   };\n\n  var depth = d()\n  var aE = a(depth+1,r3_reward)\n  var bE = b(depth,r3_reward)\n  \n  var outcome2 = function(a_strength,b_strength,box) {\n    if (a_strength.length &gt; 1) { \n      return listMean(map2(function(i,j){return lift2(i,j,box,aE,bE)}, a_strength,b_strength))\n    } else {\n      return lift2(a_strength,b_strength,box,aE,bE)\n    }\n  }\n    \n  // calculate agents' utility\n  if (a_strength.length &gt; 1) {\n    var aU = r3_reward*listMean(map2(function(i,j){return lift2(i,j,'box',aE,bE)}, a_strength,b_strength)) - alpha*aE - beta*gini(aE,bE)\n    var bU = r3_reward*listMean(map2(function(i,j){return lift2(i,j,'box',bE,aE)}, b_strength,a_strength)) - alpha*bE - beta*gini(bE,aE)\n    var table = { aU: aU, bU: bU, aE: aE, bE: bE, jointU: aU+bU, outcome: outcome2(a_strength,b_strength,'box'), a_strength: a_strength, b_strength: b_strength};\n    return table\n  } else {\n    var aU = r3_reward*lift2(a_strength,b_strength,'box',aE,bE) - alpha*aE - beta*gini(aE,bE)\n    var bU = r3_reward*lift2(b_strength,a_strength,'box',bE,aE) - alpha*bE - beta*gini(bE,aE)\n    var table = { aU: aU, bU: bU, aE: aE, bE: bE, jointU: aU+bU, outcome: outcome2(a_strength,b_strength,'box'), a_strength: a_strength, b_strength: b_strength};\n    return table\n  }\n}\n\n// find the intial effort that maximizes the joint utility\nvar startingEffort = function(a_strength,b_strength) {\n  return argMax(\n    function(init_effort) {\n      var tbl = jointUtility(init_effort,a_strength,b_strength)\n      // display(tbl.jointU)\n      return tbl.jointU\n    },\n    efforts);\n};\n\nvar startingE = startingEffort(x2a,x2b)\nvar output = {P: jointUtility(startingE,x2a,x2b).outcome}\noutput\n\"\n\n# F,F;F,F\nmdl &lt;- paste0(effort_space_joint, mdl1, \"false\", mdl2, \"false\", mdl3, \"false\", mdl4, \"false\", mdl5)\na &lt;- webppl(mdl)\njoint$prob[joint$round==3 & joint$scenario=='F,F;F,F'] &lt;- a$P*100\n\n\njoint"
  },
  {
    "objectID": "webppl vs memo/xiang2023-exp1-round3.html#enumeration",
    "href": "webppl vs memo/xiang2023-exp1-round3.html#enumeration",
    "title": "",
    "section": "2 - enumeration",
    "text": "2 - enumeration\nnow trying it using enumeration (using a discretized strength space), as a step towards translating into memo:\n\neffort_space_joint &lt;- \"var efforts = [0,0.05,0.1,0.15,0.2,0.25,0.3,0.35,0.4,0.45,0.5,0.55,0.6,0.65,0.7,0.75,0.8,0.85,0.9,0.95,1]\"\n\n## R3 Probability\nmdl1 &lt;- \"\n// convert to a @jax.jit?\nvar argMax = function(f, ar){\n  return maxWith(f, ar)[0]\n};\n\nvar alpha = 13.5, beta = 24.5\nvar weight = mem(function (box) {return 5})\nvar lowR = 10\nvar highR = 20\n\n// convert to a @jax.jit\nvar lift = function(strength,box,effort){\n  return (effort*strength &gt;= weight(box))\n}\n\n// convert to a @jax.jit\nvar optE = function(strength,box,reward) {\n  return argMax(\n    function(effort) {\n      if (strength.length &gt; 1)\n        {return reward*listMean(map(function(i){return lift(i,box,effort)}, strength)) - alpha*effort}\n        else \n          {return reward*lift(strength,box,effort) - alpha*effort}\n    },\n    efforts);\n};\n\n// convert to a @jax.jit\nvar outcome = function(strength,box,reward) {\n  if (strength.length &gt; 1)\n    { var opt_effort = optE(strength,box,reward)\n      return listMean(map(function(i){return lift(i,box,opt_effort)}, strength))}\n  else \n  {return lift(strength,box,optE(strength,box,reward))}\n}\n\n// convert to a @memo, and instead of pushing x2a and x2b to a global variable, bring in the computations which use them into the @memo ?\nvar x2a = [], x2b = []\nvar samples2 = Infer({ method: 'enumerate', model() {\n  var sa = (11+randomInteger(89))/10 // not in a general form, but computes values in (1, 10) instead of in [1, 10] to see if that fixes things\n  var sb = (11+randomInteger(89))/10\n  condition(outcome(sa,'box',lowR) == \"\nmdl2 &lt;- \")\n  condition(outcome(sb,'box',lowR) == \"\nmdl3 &lt;- \")\n  condition(outcome(sa,'box',highR) == \"\nmdl4 &lt;- \")\n  condition(outcome(sb,'box',highR) == \"\nmdl5 &lt;- \")\n  x2a.push(sa)\n  x2b.push(sb)\n  return 0\n}})\n\n// convert to a combination of @jax.jit and @memo ? so I'm not doing two-step nested optimization (like the difference between RSA in webppl and in memo)\nvar jointUtility = function(init_effort,a_strength,b_strength){\n  var r3_reward = highR // round 3 reward\n  \n  var lift2 = function(strength,strength2,box,effort,effort2){\n    return (effort*strength + effort2*strength2) &gt;= weight(box)\n  }\n\n  var gini = function(effort, effort2) {return (effort == effort2 ? 0 : Math.abs(effort-effort2)/4/(effort+effort2))}\n  // For the Maximum effort model, the Gini coefficient is always 0, so it is fine to keep this term in here for the maximum effort model.\n  \n  var a = function(depth,reward) {\n      var effort2 = b(depth - 1,reward)\n      var optEffort = function(strength,strength2,box,reward) {\n        return argMax(\n          function(effort) {\n            if (a_strength.length &gt; 1) {\n              return reward*listMean(map2(function(i,j){return lift2(i,j,box,effort,effort2)}, strength,strength2)) - alpha*effort - beta*gini(effort,effort2)\n            } else {\n              return reward*lift2(strength,strength2,box,effort,effort2) - alpha*effort - beta*gini(effort,effort2)\n            }\n          },\n          efforts);\n      };\n    return optEffort(a_strength,b_strength,'box',reward)\n  }\n  \n  var b = function(depth,reward) {\n      var effort2 = depth===0 ? init_effort : a(depth,reward)\n      var optEffort = function(strength,strength2,box,reward) {\n        return argMax(\n          function(effort) {\n            if (a_strength.length &gt; 1) {\n              return reward*listMean(map2(function(i,j){return lift2(i,j,box,effort,effort2)}, strength,strength2)) - alpha*effort - beta*gini(effort,effort2)\n            } else {\n              return reward*lift2(strength,strength2,box,effort,effort2) - alpha*effort - beta*gini(effort,effort2)\n            }\n          },\n          efforts);\n      };\n    return optEffort(b_strength,a_strength,'box',reward)\n  }\n  \n  var findDepth = function(x) { // find the depth that is needed to converge\n     if (Math.abs(b(x,r3_reward) - b(x+1,r3_reward)) &lt; 0.06) {\n       return x;\n     } else {\n       return -1;\n     }\n   };\n\n  var ds = [1,2,5,10]; // if converges in 1 round, then depth = 1; if not, then try 2, 5, 10.\n  var d = function() {\n     if (findDepth(ds[0]) &gt; 0) {\n       return ds[0]\n     } else if (findDepth(ds[1]) &gt; 0) {\n       return ds[1]\n     } else if (findDepth(ds[2]) &gt; 0) {\n       return ds[2]\n     } else if (findDepth(ds[3]) &gt; 0) {\n       return ds[3]\n     } else {\n       display('Effort could not converge in ' + ds[3] + ' iterations. Increase the number of iterations and try again.')\n     }\n   };\n\n  var depth = d()\n  var aE = a(depth+1,r3_reward)\n  var bE = b(depth,r3_reward)\n  \n  var outcome2 = function(a_strength,b_strength,box) {\n    if (a_strength.length &gt; 1) { \n      return listMean(map2(function(i,j){return lift2(i,j,box,aE,bE)}, a_strength,b_strength))\n    } else {\n      return lift2(a_strength,b_strength,box,aE,bE)\n    }\n  }\n    \n  // calculate agents' utility\n  if (a_strength.length &gt; 1) {\n    var aU = r3_reward*listMean(map2(function(i,j){return lift2(i,j,'box',aE,bE)}, a_strength,b_strength)) - alpha*aE - beta*gini(aE,bE)\n    var bU = r3_reward*listMean(map2(function(i,j){return lift2(i,j,'box',bE,aE)}, b_strength,a_strength)) - alpha*bE - beta*gini(bE,aE)\n    var table = { aU: aU, bU: bU, aE: aE, bE: bE, jointU: aU+bU, outcome: outcome2(a_strength,b_strength,'box'), a_strength: a_strength, b_strength: b_strength};\n    return table\n  } else {\n    var aU = r3_reward*lift2(a_strength,b_strength,'box',aE,bE) - alpha*aE - beta*gini(aE,bE)\n    var bU = r3_reward*lift2(b_strength,a_strength,'box',bE,aE) - alpha*bE - beta*gini(bE,aE)\n    var table = { aU: aU, bU: bU, aE: aE, bE: bE, jointU: aU+bU, outcome: outcome2(a_strength,b_strength,'box'), a_strength: a_strength, b_strength: b_strength};\n    return table\n  }\n}\n\n// convert to a @jax.jit\n// find the intial effort that maximizes the joint utility\nvar startingEffort = function(a_strength,b_strength) {\n  return argMax(\n    function(init_effort) {\n      var tbl = jointUtility(init_effort,a_strength,b_strength)\n      return tbl.jointU\n    },\n    efforts);\n};\n\n\nvar startingE = startingEffort(x2a,x2b)\n// display(jointUtility(startingE,x2a,x2b))\nvar output = {P: jointUtility(startingE,x2a,x2b).outcome}\noutput\n\"\n\n# F,F;F,F\nmdl &lt;- paste0(effort_space_joint, mdl1, \"false\", mdl2, \"false\", mdl3, \"false\", mdl4, \"false\", mdl5)\nwebppl(mdl)\n\n\n\nnote that their model is assuming that 1 and 10 are lower probability, which is just a computational limitation! when enumerating, the resulting p is infinitesimally small but matches all others; when using MCMC, the bounds are underweighted.\n\n-&gt; using something like (11+randomInteger(89))/10 to simulate sampling from (1,10) rather than [1,10]; inspired by the observation that webppl’s uniform distribution is actually more like this, since there are only finite samples\nmaybe just need to exclude 1 from the range and not 10? -&gt; trying different versions of the discretized distribution"
  },
  {
    "objectID": "webppl vs memo/xiang2023-exp1-round3.html#comparison-across-scenarios",
    "href": "webppl vs memo/xiang2023-exp1-round3.html#comparison-across-scenarios",
    "title": "",
    "section": "3 - comparison across scenarios",
    "text": "3 - comparison across scenarios\nNow moved into xiang2023-exp1-round3-with-debugging.wppl, which has input parameters and logs.\nWalking step by step and validate that the values (posteriors and equilibria across all 6 scenarios) match:\n\n\npaper results\n\n\nwebppl mcmc (below)\n\n\nwebppl mcmc discrete (below)\n\n\nwebppl enumerate (below)\n\n\nTODO (in-progress) determine if need to use (1,10) (or another variant) instead of [1,10] for strength prior\n\n\nTODO memo enumerate, with same parameters as webppl enumerate (xiang2023-exp1-round3-memo.qmd)\n\n\nmoonshot: memo enumerate, but the equilibrium-finding process uses memo frames (still accelerated by JAX, but now in the language of memo)\n\n\nTODO: recreate compensatory effort and solitary effort models in memo; simple, no need to validate incrementally like doing for joint effort model\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.1     ✔ stringr   1.5.2\n✔ ggplot2   4.0.0     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nFAIL = FALSE\nLIFT = TRUE\n\n\npaper results\nSee paper\n\n\nstrength prior [1,10]\n\nmcmc with continuous prior [1,10] (like paper)\n\nsuppressWarnings(rwebppl::kill_webppl())\n\nusing webppl version: main v0.9.15-27823b2 /Users/jacobzimmerman/ucsd/fyp/memo-sandbox/.pixi/envs/default/lib/R/library/rwebppl/js/webppl\n\nMCMC_continuous_ffff &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = FALSE,\n\n    a_r1result = FAIL, b_r1result = FAIL,\n    a_r2result = FAIL, b_r2result = FAIL\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_continuous_fffl &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = FALSE,\n\n    a_r1result = FAIL, b_r1result = FAIL,\n    a_r2result = FAIL, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_continuous_flfl &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = FALSE,\n\n    a_r1result = FAIL, b_r1result = LIFT,\n    a_r2result = FAIL, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_continuous_ffll &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = FALSE,\n\n    a_r1result = FAIL, b_r1result = FAIL,\n    a_r2result = LIFT, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_continuous_flll &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = FALSE,\n\n    a_r1result = FAIL, b_r1result = LIFT,\n    a_r2result = LIFT, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_continuous_llll &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = FALSE,\n\n    a_r1result = LIFT, b_r1result = LIFT,\n    a_r2result = LIFT, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\n\n\nmcmc with discrete prior [1,10]\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_discrete_ffff &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"[1,10]\",\n\n    a_r1result = FAIL, b_r1result = FAIL,\n    a_r2result = FAIL, b_r2result = FAIL\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_discrete_fffl &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"[1,10]\",\n\n    a_r1result = FAIL, b_r1result = FAIL,\n    a_r2result = FAIL, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_discrete_flfl &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"[1,10]\",\n\n    a_r1result = FAIL, b_r1result = LIFT,\n    a_r2result = FAIL, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_discrete_ffll &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"[1,10]\",\n\n    a_r1result = FAIL, b_r1result = FAIL,\n    a_r2result = LIFT, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_discrete_flll &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"[1,10]\",\n\n    a_r1result = FAIL, b_r1result = LIFT,\n    a_r2result = LIFT, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_discrete_llll &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"[1,10]\",\n\n    a_r1result = LIFT, b_r1result = LIFT,\n    a_r2result = LIFT, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nenumerate with discrete prior [1,10]\n\nsuppressWarnings(rwebppl::kill_webppl())\nenumerate_ffff &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"enumerate\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"[1,10]\",\n\n    a_r1result = FAIL, b_r1result = FAIL,\n    a_r2result = FAIL, b_r2result = FAIL\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nenumerate_fffl &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"enumerate\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"[1,10]\",\n\n    a_r1result = FAIL, b_r1result = FAIL,\n    a_r2result = FAIL, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nenumerate_flfl &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"enumerate\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"[1,10]\",\n\n    a_r1result = FAIL, b_r1result = LIFT,\n    a_r2result = FAIL, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nenumerate_ffll &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"enumerate\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"[1,10]\",\n\n    a_r1result = FAIL, b_r1result = FAIL,\n    a_r2result = LIFT, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nenumerate_flll &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"enumerate\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"[1,10]\",\n\n    a_r1result = FAIL, b_r1result = LIFT,\n    a_r2result = LIFT, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nenumerate_llll &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"enumerate\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"[1,10]\",\n\n    a_r1result = LIFT, b_r1result = LIFT,\n    a_r2result = LIFT, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\n\nsummarize\n\ncompare_results &lt;- function() {\n    P_results_summary &lt;- tibble(\n        scenario = c(\"F,F;F,F\",\"F,F;F,L\",\"F,L;F,L\",\"F,F;L,L\",\"F,L;L,L\",\"L,L;L,L\"),\n        MCMC_continuous = c(\n            MCMC_continuous_ffff$P,\n            MCMC_continuous_fffl$P,\n            MCMC_continuous_flfl$P,\n            MCMC_continuous_ffll$P,\n            MCMC_continuous_flll$P,\n            MCMC_continuous_llll$P\n        ),\n        MCMC_discrete = c(\n            MCMC_discrete_ffff$P,\n            MCMC_discrete_fffl$P,\n            MCMC_discrete_flfl$P,\n            MCMC_discrete_ffll$P,\n            MCMC_discrete_flll$P,\n            MCMC_discrete_llll$P\n        ),\n        enumerate = c(\n            enumerate_ffff$P,\n            enumerate_fffl$P,\n            enumerate_flfl$P,\n            enumerate_ffll$P,\n            enumerate_flll$P,\n            enumerate_llll$P\n        )\n    )\n\n    # from $aStrength_posterior and $bStrength_posterior\n    posteriors_summary &lt;- list(\n        MCMC_continuous = list(\n            a = list(\n                ffff = MCMC_continuous_ffff$aStrength_posterior,\n                fffl = MCMC_continuous_fffl$aStrength_posterior,\n                flfl = MCMC_continuous_flfl$aStrength_posterior,\n                ffll = MCMC_continuous_ffll$aStrength_posterior,\n                flll = MCMC_continuous_flll$aStrength_posterior,\n                llll = MCMC_continuous_llll$aStrength_posterior\n            ),\n            b = list(\n                ffff = MCMC_continuous_ffff$bStrength_posterior,\n                fffl = MCMC_continuous_fffl$bStrength_posterior,\n                flfl = MCMC_continuous_flfl$bStrength_posterior,\n                ffll = MCMC_continuous_ffll$bStrength_posterior,\n                flll = MCMC_continuous_flll$bStrength_posterior,\n                llll = MCMC_continuous_llll$bStrength_posterior\n            )\n        ),\n        MCMC_discrete = list(\n            a = list(\n                ffff = MCMC_discrete_ffff$aStrength_posterior,\n                fffl = MCMC_discrete_fffl$aStrength_posterior,\n                flfl = MCMC_discrete_flfl$aStrength_posterior,\n                ffll = MCMC_discrete_ffll$aStrength_posterior,\n                flll = MCMC_discrete_flll$aStrength_posterior,\n                llll = MCMC_discrete_llll$aStrength_posterior\n            ),\n            b = list(\n                ffff = MCMC_discrete_ffff$bStrength_posterior,\n                fffl = MCMC_discrete_fffl$bStrength_posterior,\n                flfl = MCMC_discrete_flfl$bStrength_posterior,\n                ffll = MCMC_discrete_ffll$bStrength_posterior,\n                flll = MCMC_discrete_flll$bStrength_posterior,\n                llll = MCMC_discrete_llll$bStrength_posterior\n            )\n        ),\n        enumerate = list(\n            a = list(\n                ffff = enumerate_ffff$aStrength_posterior,\n                fffl = enumerate_fffl$aStrength_posterior,\n                flfl = enumerate_flfl$aStrength_posterior,\n                ffll = enumerate_ffll$aStrength_posterior,\n                flll = enumerate_flll$aStrength_posterior,\n                llll = enumerate_llll$aStrength_posterior\n            ),\n            b = list(\n                ffff = enumerate_ffff$bStrength_posterior,\n                fffl = enumerate_fffl$bStrength_posterior,\n                flfl = enumerate_flfl$bStrength_posterior,\n                ffll = enumerate_ffll$bStrength_posterior,\n                flll = enumerate_flll$bStrength_posterior,\n                llll = enumerate_llll$bStrength_posterior\n            )\n        )\n    )\n\n    print(\"Now compare visually\")\n\n    show(P_results_summary)\n\n    # Convert posteriors_summary to tidy format for plotting\n    posteriors_tidy &lt;- map_dfr(names(posteriors_summary), function(method_name) {\n        map_dfr(c(\"a\", \"b\"), function(agent) {\n            map_dfr(names(posteriors_summary[[method_name]][[agent]]), function(scenario) {\n            tibble(\n                method = method_name,\n                agent = agent,\n                scenario = scenario,\n                strength = posteriors_summary[[method_name]][[agent]][[scenario]]\n            )\n            })\n        })\n    })\n\n    # Plot density of posteriors for each scenario\n    show(\n        ggplot(posteriors_tidy, aes(x = strength, color = method, linetype = agent)) +\n            geom_density() +\n            facet_wrap(~scenario, scales = \"free_y\") +\n            labs(\n                title = \"Strength Posteriors Across Scenarios\",\n                x = \"Strength\",\n                y = \"Density\",\n                color = \"Method\",\n                linetype = \"Agent\"\n            ) +\n            theme_minimal() +\n            theme(legend.position = \"bottom\")\n    )\n\n    print(\"Now separately for each method (or method and agent) and so that we can ensure that there are no missing posteriors\")\n\n    show(\n        ggplot(posteriors_tidy, aes(x = strength, color = method, linetype = agent)) +\n            geom_density() +\n            facet_grid(method~scenario, scales = \"free_y\") +\n            labs(\n                title = \"Strength Posteriors Across Scenarios\",\n                x = \"Strength\",\n                y = \"Density\",\n                color = \"Method\",\n                linetype = \"Agent\"\n            ) +\n            theme_minimal() +\n            theme(legend.position = \"bottom\")\n    )\n\n    show(\n        ggplot(posteriors_tidy, aes(x = strength, color = method, linetype = agent)) +\n            geom_density() +\n            facet_grid(method~scenario+agent, scales = \"free_y\") +\n            labs(\n                title = \"Strength Posteriors Across Scenarios\",\n                x = \"Strength\",\n                y = \"Density\",\n                color = \"Method\",\n                linetype = \"Agent\"\n            ) +\n            theme_minimal() +\n            theme(legend.position = \"bottom\")\n    )\n\n    print(\"Compare all output values across methods\")\n\n    print(\"Extract all final_table values into a comprehensive summary\")\n\n    all_results &lt;- tibble(\n        scenario = rep(c(\"ffff\",\"fffl\",\"flfl\",\"ffll\",\"flll\",\"llll\"), 3),\n        method = rep(c(\"MCMC_continuous\", \"MCMC_discrete\", \"enumerate\"), each = 6),\n        startingE = c(\n            # MCMC_continuous\n            MCMC_continuous_ffff$startingE, MCMC_continuous_fffl$startingE, MCMC_continuous_flfl$startingE,\n            MCMC_continuous_ffll$startingE, MCMC_continuous_flll$startingE, MCMC_continuous_llll$startingE,\n            # MCMC_discrete\n            MCMC_discrete_ffff$startingE, MCMC_discrete_fffl$startingE, MCMC_discrete_flfl$startingE,\n            MCMC_discrete_ffll$startingE, MCMC_discrete_flll$startingE, MCMC_discrete_llll$startingE,\n            # enumerate\n            enumerate_ffff$startingE, enumerate_fffl$startingE, enumerate_flfl$startingE,\n            enumerate_ffll$startingE, enumerate_flll$startingE, enumerate_llll$startingE\n        ),\n        aE = c(\n            # MCMC_continuous\n            MCMC_continuous_ffff$final_table$aE, MCMC_continuous_fffl$final_table$aE, MCMC_continuous_flfl$final_table$aE,\n            MCMC_continuous_ffll$final_table$aE, MCMC_continuous_flll$final_table$aE, MCMC_continuous_llll$final_table$aE,\n            # MCMC_discrete\n            MCMC_discrete_ffff$final_table$aE, MCMC_discrete_fffl$final_table$aE, MCMC_discrete_flfl$final_table$aE,\n            MCMC_discrete_ffll$final_table$aE, MCMC_discrete_flll$final_table$aE, MCMC_discrete_llll$final_table$aE,\n            # enumerate\n            enumerate_ffff$final_table$aE, enumerate_fffl$final_table$aE, enumerate_flfl$final_table$aE,\n            enumerate_ffll$final_table$aE, enumerate_flll$final_table$aE, enumerate_llll$final_table$aE\n        ),\n        bE = c(\n            # MCMC_continuous\n            MCMC_continuous_ffff$final_table$bE, MCMC_continuous_fffl$final_table$bE, MCMC_continuous_flfl$final_table$bE,\n            MCMC_continuous_ffll$final_table$bE, MCMC_continuous_flll$final_table$bE, MCMC_continuous_llll$final_table$bE,\n            # MCMC_discrete\n            MCMC_discrete_ffff$final_table$bE, MCMC_discrete_fffl$final_table$bE, MCMC_discrete_flfl$final_table$bE,\n            MCMC_discrete_ffll$final_table$bE, MCMC_discrete_flll$final_table$bE, MCMC_discrete_llll$final_table$bE,\n            # enumerate\n            enumerate_ffff$final_table$bE, enumerate_fffl$final_table$bE, enumerate_flfl$final_table$bE,\n            enumerate_ffll$final_table$bE, enumerate_flll$final_table$bE, enumerate_llll$final_table$bE\n        ),\n        aU = c(\n            # MCMC_continuous\n            MCMC_continuous_ffff$final_table$aU, MCMC_continuous_fffl$final_table$aU, MCMC_continuous_flfl$final_table$aU,\n            MCMC_continuous_ffll$final_table$aU, MCMC_continuous_flll$final_table$aU, MCMC_continuous_llll$final_table$aU,\n            # MCMC_discrete\n            MCMC_discrete_ffff$final_table$aU, MCMC_discrete_fffl$final_table$aU, MCMC_discrete_flfl$final_table$aU,\n            MCMC_discrete_ffll$final_table$aU, MCMC_discrete_flll$final_table$aU, MCMC_discrete_llll$final_table$aU,\n            # enumerate\n            enumerate_ffff$final_table$aU, enumerate_fffl$final_table$aU, enumerate_flfl$final_table$aU,\n            enumerate_ffll$final_table$aU, enumerate_flll$final_table$aU, enumerate_llll$final_table$aU\n        ),\n        bU = c(\n            # MCMC_continuous\n            MCMC_continuous_ffff$final_table$bU, MCMC_continuous_fffl$final_table$bU, MCMC_continuous_flfl$final_table$bU,\n            MCMC_continuous_ffll$final_table$bU, MCMC_continuous_flll$final_table$bU, MCMC_continuous_llll$final_table$bU,\n            # MCMC_discrete\n            MCMC_discrete_ffff$final_table$bU, MCMC_discrete_fffl$final_table$bU, MCMC_discrete_flfl$final_table$bU,\n            MCMC_discrete_ffll$final_table$bU, MCMC_discrete_flll$final_table$bU, MCMC_discrete_llll$final_table$bU,\n            # enumerate\n            enumerate_ffff$final_table$bU, enumerate_fffl$final_table$bU, enumerate_flfl$final_table$bU,\n            enumerate_ffll$final_table$bU, enumerate_flll$final_table$bU, enumerate_llll$final_table$bU\n        ),\n        jointU = c(\n            # MCMC_continuous\n            MCMC_continuous_ffff$final_table$jointU, MCMC_continuous_fffl$final_table$jointU, MCMC_continuous_flfl$final_table$jointU,\n            MCMC_continuous_ffll$final_table$jointU, MCMC_continuous_flll$final_table$jointU, MCMC_continuous_llll$final_table$jointU,\n            # MCMC_discrete\n            MCMC_discrete_ffff$final_table$jointU, MCMC_discrete_fffl$final_table$jointU, MCMC_discrete_flfl$final_table$jointU,\n            MCMC_discrete_ffll$final_table$jointU, MCMC_discrete_flll$final_table$jointU, MCMC_discrete_llll$final_table$jointU,\n            # enumerate\n            enumerate_ffff$final_table$jointU, enumerate_fffl$final_table$jointU, enumerate_flfl$final_table$jointU,\n            enumerate_ffll$final_table$jointU, enumerate_flll$final_table$jointU, enumerate_llll$final_table$jointU\n        ),\n        P = c(\n            # MCMC_continuous\n            MCMC_continuous_ffff$P, MCMC_continuous_fffl$P, MCMC_continuous_flfl$P,\n            MCMC_continuous_ffll$P, MCMC_continuous_flll$P, MCMC_continuous_llll$P,\n            # MCMC_discrete\n            MCMC_discrete_ffff$P, MCMC_discrete_fffl$P, MCMC_discrete_flfl$P,\n            MCMC_discrete_ffll$P, MCMC_discrete_flll$P, MCMC_discrete_llll$P,\n            # enumerate\n            enumerate_ffff$P, enumerate_fffl$P, enumerate_flfl$P,\n            enumerate_ffll$P, enumerate_flll$P, enumerate_llll$P\n        )\n    )\n\n    # Display the full comparison table\n    show(all_results)\n\n    # Pivot to wide format for easier comparison across methods\n    all_results_wide &lt;- all_results %&gt;%\n        pivot_longer(cols = c(startingE, aE, bE, aU, bU, jointU, P),\n                    names_to = \"variable\",\n                    values_to = \"value\") %&gt;%\n        pivot_wider(names_from = method,\n                    values_from = value,\n                    id_cols = c(scenario, variable))\n\n    # Display wide format\n    show(all_results_wide)\n\n    # Plot comparisons for each variable\n    all_results_long &lt;- all_results %&gt;%\n        pivot_longer(cols = c(startingE, aE, bE, aU, bU, jointU, P),\n                    names_to = \"variable\",\n                    values_to = \"value\")\n\n    show(\n        ggplot(all_results_long, aes(x = scenario, y = value, fill = method)) +\n            geom_col(position = \"dodge\") +\n            facet_wrap(~variable, scales = \"free_y\", ncol = 2) +\n            labs(\n                title = \"All Output Variables Comparison Across Methods and Scenarios\",\n                x = \"Scenario\",\n                y = \"Value\",\n                fill = \"Method\"\n            ) +\n            theme_minimal() +\n            theme(axis.text.x = element_text(angle = 45, hjust = 1))\n    )\n\n    # # Calculate differences between methods for each variable\n    # all_results_differences &lt;- all_results_wide %&gt;%\n    #     mutate(\n    #         diff_continuous_discrete = MCMC_continuous - MCMC_discrete,\n    #         diff_discrete_enumerate = MCMC_discrete - enumerate,\n    #         diff_continuous_enumerate = MCMC_continuous - enumerate\n    #     )\n\n    # # Summary of differences\n    # all_results_differences %&gt;%\n    #     group_by(variable) %&gt;%\n    #     summarise(\n    #         mean_abs_diff_continuous_discrete = mean(abs(diff_continuous_discrete)),\n    #         max_abs_diff_continuous_discrete = max(abs(diff_continuous_discrete)),\n    #         mean_abs_diff_discrete_enumerate = mean(abs(diff_discrete_enumerate)),\n    #         max_abs_diff_discrete_enumerate = max(abs(diff_discrete_enumerate)),\n    #         mean_abs_diff_continuous_enumerate = mean(abs(diff_continuous_enumerate)),\n    #         max_abs_diff_continuous_enumerate = max(abs(diff_continuous_enumerate))\n    #     ) %&gt;%\n    #     show()\n\n    # To evaluate how startingE was found, inspect $startingE_table:\n    startingE_all_results &lt;- tibble(\n        scenario = rep(c(\"ffff\",\"fffl\",\"flfl\",\"ffll\",\"flll\",\"llll\"), 3),\n        method = rep(c(\"MCMC_continuous\", \"MCMC_discrete\", \"enumerate\"), each = 6),\n        aE = c(\n            # MCMC_continuous\n            MCMC_continuous_ffff$startingE_table$aE, MCMC_continuous_fffl$startingE_table$aE, MCMC_continuous_flfl$startingE_table$aE,\n            MCMC_continuous_ffll$startingE_table$aE, MCMC_continuous_flll$startingE_table$aE, MCMC_continuous_llll$startingE_table$aE,\n            # MCMC_discrete\n            MCMC_discrete_ffff$startingE_table$aE, MCMC_discrete_fffl$startingE_table$aE, MCMC_discrete_flfl$startingE_table$aE,\n            MCMC_discrete_ffll$startingE_table$aE, MCMC_discrete_flll$startingE_table$aE, MCMC_discrete_llll$startingE_table$aE,\n            # enumerate\n            enumerate_ffff$startingE_table$aE, enumerate_fffl$startingE_table$aE, enumerate_flfl$startingE_table$aE,\n            enumerate_ffll$startingE_table$aE, enumerate_flll$startingE_table$aE, enumerate_llll$startingE_table$aE\n        ),\n        bE = c(\n            # MCMC_continuous\n            MCMC_continuous_ffff$startingE_table$bE, MCMC_continuous_fffl$startingE_table$bE, MCMC_continuous_flfl$startingE_table$bE,\n            MCMC_continuous_ffll$startingE_table$bE, MCMC_continuous_flll$startingE_table$bE, MCMC_continuous_llll$startingE_table$bE,\n            # MCMC_discrete\n            MCMC_discrete_ffff$startingE_table$bE, MCMC_discrete_fffl$startingE_table$bE, MCMC_discrete_flfl$startingE_table$bE,\n            MCMC_discrete_ffll$startingE_table$bE, MCMC_discrete_flll$startingE_table$bE, MCMC_discrete_llll$startingE_table$bE,\n            # enumerate\n            enumerate_ffff$startingE_table$bE, enumerate_fffl$startingE_table$bE, enumerate_flfl$startingE_table$bE,\n            enumerate_ffll$startingE_table$bE, enumerate_flll$startingE_table$bE, enumerate_llll$startingE_table$bE\n        ),\n        aU = c(\n            # MCMC_continuous\n            MCMC_continuous_ffff$startingE_table$aU, MCMC_continuous_fffl$startingE_table$aU, MCMC_continuous_flfl$startingE_table$aU,\n            MCMC_continuous_ffll$startingE_table$aU, MCMC_continuous_flll$startingE_table$aU, MCMC_continuous_llll$startingE_table$aU,\n            # MCMC_discrete\n            MCMC_discrete_ffff$startingE_table$aU, MCMC_discrete_fffl$startingE_table$aU, MCMC_discrete_flfl$startingE_table$aU,\n            MCMC_discrete_ffll$startingE_table$aU, MCMC_discrete_flll$startingE_table$aU, MCMC_discrete_llll$startingE_table$aU,\n            # enumerate\n            enumerate_ffff$startingE_table$aU, enumerate_fffl$startingE_table$aU, enumerate_flfl$startingE_table$aU,\n            enumerate_ffll$startingE_table$aU, enumerate_flll$startingE_table$aU, enumerate_llll$startingE_table$aU\n        ),\n        bU = c(\n            # MCMC_continuous\n            MCMC_continuous_ffff$startingE_table$bU, MCMC_continuous_fffl$startingE_table$bU, MCMC_continuous_flfl$startingE_table$bU,\n            MCMC_continuous_ffll$startingE_table$bU, MCMC_continuous_flll$startingE_table$bU, MCMC_continuous_llll$startingE_table$bU,\n            # MCMC_discrete\n            MCMC_discrete_ffff$startingE_table$bU, MCMC_discrete_fffl$startingE_table$bU, MCMC_discrete_flfl$startingE_table$bU,\n            MCMC_discrete_ffll$startingE_table$bU, MCMC_discrete_flll$startingE_table$bU, MCMC_discrete_llll$startingE_table$bU,\n            # enumerate\n            enumerate_ffff$startingE_table$bU, enumerate_fffl$startingE_table$bU, enumerate_flfl$startingE_table$bU,\n            enumerate_ffll$startingE_table$bU, enumerate_flll$startingE_table$bU, enumerate_llll$startingE_table$bU\n        ),\n        jointU = c(\n            # MCMC_continuous\n            MCMC_continuous_ffff$startingE_table$jointU, MCMC_continuous_fffl$startingE_table$jointU, MCMC_continuous_flfl$startingE_table$jointU,\n            MCMC_continuous_ffll$startingE_table$jointU, MCMC_continuous_flll$startingE_table$jointU, MCMC_continuous_llll$startingE_table$jointU,\n            # MCMC_discrete\n            MCMC_discrete_ffff$startingE_table$jointU, MCMC_discrete_fffl$startingE_table$jointU, MCMC_discrete_flfl$startingE_table$jointU,\n            MCMC_discrete_ffll$startingE_table$jointU, MCMC_discrete_flll$startingE_table$jointU, MCMC_discrete_llll$startingE_table$jointU,\n            # enumerate\n            enumerate_ffff$startingE_table$jointU, enumerate_fffl$startingE_table$jointU, enumerate_flfl$startingE_table$jointU,\n            enumerate_ffll$startingE_table$jointU, enumerate_flll$startingE_table$jointU, enumerate_llll$startingE_table$jointU\n        )\n    )\n\n    # Display the full comparison table\n    show(startingE_all_results)\n\n    # Pivot to wide format for easier comparison across methods\n    startingE_all_results_wide &lt;- startingE_all_results %&gt;%\n        pivot_longer(cols = c(aE, bE, aU, bU, jointU),\n                    names_to = \"variable\",\n                    values_to = \"value\") %&gt;%\n        pivot_wider(names_from = method,\n                    values_from = value,\n                    id_cols = c(scenario, variable))\n\n    # Display wide format\n    show(startingE_all_results_wide)\n\n    # Plot comparisons for each variable\n    startingE_all_results_long &lt;- startingE_all_results %&gt;%\n        pivot_longer(cols = c(aE, bE, aU, bU, jointU),\n                    names_to = \"variable\",\n                    values_to = \"value\")\n\n    show(\n        ggplot(startingE_all_results_long, aes(x = scenario, y = value, fill = method)) +\n            geom_col(position = \"dodge\") +\n            facet_wrap(~variable, scales = \"free_y\", ncol = 2) +\n            labs(\n                title = \"(starting effort) All Output Variables Comparison Across Methods and Scenarios\",\n                x = \"Scenario\",\n                y = \"Value\",\n                fill = \"Method\"\n            ) +\n            theme_minimal() +\n            theme(axis.text.x = element_text(angle = 45, hjust = 1))\n    )\n}\n\n\ncompare_results()\n\n[1] \"Now compare visually\"\n# A tibble: 6 × 4\n  scenario MCMC_continuous MCMC_discrete enumerate\n  &lt;chr&gt;              &lt;int&gt;         &lt;dbl&gt;     &lt;dbl&gt;\n1 F,F;F,F                0         0.711     0.649\n2 F,F;F,L                1         1         1    \n3 F,L;F,L                1         1         1    \n4 F,F;L,L                1         1         1    \n5 F,L;L,L                1         1         1    \n6 L,L;L,L                1         1         1    \n\n\n\n\n\n\n\n\n\n[1] \"Now separately for each method (or method and agent) and so that we can ensure that there are no missing posteriors\"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n[1] \"Compare all output values across methods\"\n[1] \"Extract all final_table values into a comprehensive summary\"\n# A tibble: 18 × 9\n   scenario method          startingE    aE    bE     aU     bU jointU     P\n   &lt;chr&gt;    &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;\n 1 ffff     MCMC_continuous     0.188  0.15  0.15 -2.02  -2.02  -4.05  0    \n 2 fffl     MCMC_continuous    17.5    0     1    13.9    0.375 14.2   1    \n 3 flfl     MCMC_continuous    23.4    0.1   0.7  14.1    5.96  20.0   1    \n 4 ffll     MCMC_continuous    26.5    1     0     0.375 13.9   14.2   1    \n 5 flll     MCMC_continuous    28.9    1     0     0.375 13.9   14.2   1    \n 6 llll     MCMC_continuous    30.6    0.6   0.1   7.52  14.3   21.8   1    \n 7 ffff     MCMC_discrete       1.46   1     1     0.728  0.728  1.46  0.711\n 8 fffl     MCMC_discrete      17.1    0     1    13.9    0.375 14.2   1    \n 9 flfl     MCMC_discrete      22.9    0.1   0.7  14.1    5.96  20.0   1    \n10 ffll     MCMC_discrete      26.5    1     0     0.375 13.9   14.2   1    \n11 flll     MCMC_discrete      28.8    1     0     0.375 13.9   14.2   1    \n12 llll     MCMC_discrete      30.6    0.6   0.1   7.52  14.3   21.8   1    \n13 ffff     enumerate           1.38   0.95  0.95  0.163  0.163  0.325 0.649\n14 fffl     enumerate          17.1    0     1    13.9    0.375 14.2   1    \n15 flfl     enumerate          22.8    0.1   0.7  14.1    5.96  20.0   1    \n16 ffll     enumerate          26.5    1     0     0.375 13.9   14.2   1    \n17 flll     enumerate          28.8    1     0     0.375 13.9   14.2   1    \n18 llll     enumerate          30.6    0.6   0.1   7.52  14.3   21.8   1    \n# A tibble: 42 × 5\n   scenario variable  MCMC_continuous MCMC_discrete enumerate\n   &lt;chr&gt;    &lt;chr&gt;               &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;\n 1 ffff     startingE           0.188         1.46      1.38 \n 2 ffff     aE                  0.15          1         0.95 \n 3 ffff     bE                  0.15          1         0.95 \n 4 ffff     aU                 -2.02          0.728     0.163\n 5 ffff     bU                 -2.02          0.728     0.163\n 6 ffff     jointU             -4.05          1.46      0.325\n 7 ffff     P                   0             0.711     0.649\n 8 fffl     startingE          17.5          17.1      17.1  \n 9 fffl     aE                  0             0         0    \n10 fffl     bE                  1             1         1    \n# ℹ 32 more rows\n\n\n\n\n\n\n\n\n\n# A tibble: 18 × 7\n   scenario method             aE    bE      aU      bU jointU\n   &lt;chr&gt;    &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;\n 1 ffff     MCMC_continuous  0.9   0.9   0.0939  0.0939  0.188\n 2 fffl     MCMC_continuous  0.35  0.85 12.1     5.36   17.5  \n 3 flfl     MCMC_continuous  0.5   0.55 12.0    11.4    23.4  \n 4 ffll     MCMC_continuous  0.5   0.5  13.2    13.2    26.5  \n 5 flll     MCMC_continuous  0.4   0.4  14.5    14.5    28.9  \n 6 llll     MCMC_continuous  0.35  0.35 15.3    15.3    30.6  \n 7 ffff     MCMC_discrete    1     1     0.728   0.728   1.46 \n 8 fffl     MCMC_discrete    0.35  0.85 11.9     5.18   17.1  \n 9 flfl     MCMC_discrete    0.35  0.6  13.2     9.78   22.9  \n10 ffll     MCMC_discrete    0.5   0.5  13.2    13.2    26.5  \n11 flll     MCMC_discrete    0.4   0.4  14.4    14.4    28.8  \n12 llll     MCMC_discrete    0.35  0.35 15.3    15.3    30.6  \n13 ffff     enumerate        1     1     0.688   0.688   1.38 \n14 fffl     enumerate        0.35  0.85 11.9     5.18   17.1  \n15 flfl     enumerate        0.35  0.6  13.1     9.72   22.8  \n16 ffll     enumerate        0.5   0.5  13.2    13.2    26.5  \n17 flll     enumerate        0.4   0.4  14.4    14.4    28.8  \n18 llll     enumerate        0.35  0.35 15.3    15.3    30.6  \n# A tibble: 30 × 5\n   scenario variable MCMC_continuous MCMC_discrete enumerate\n   &lt;chr&gt;    &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;\n 1 ffff     aE                0.9            1         1    \n 2 ffff     bE                0.9            1         1    \n 3 ffff     aU                0.0939         0.728     0.688\n 4 ffff     bU                0.0939         0.728     0.688\n 5 ffff     jointU            0.188          1.46      1.38 \n 6 fffl     aE                0.35           0.35      0.35 \n 7 fffl     bE                0.85           0.85      0.85 \n 8 fffl     aU               12.1           11.9      11.9  \n 9 fffl     bU                5.36           5.18      5.18 \n10 fffl     jointU           17.5           17.1      17.1  \n# ℹ 20 more rows\n\n\n\n\n\n\n\n\n\n\n\n\nstrength prior (1,10)\n\n\nmcmc with discrete prior (1,10)\n\nsuppressWarnings(rwebppl::kill_webppl())\n\nusing webppl version: main v0.9.15-27823b2 /Users/jacobzimmerman/ucsd/fyp/memo-sandbox/.pixi/envs/default/lib/R/library/rwebppl/js/webppl\n\nMCMC_discrete_ffff &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"(1,10)\",\n\n    a_r1result = FAIL, b_r1result = FAIL,\n    a_r2result = FAIL, b_r2result = FAIL\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_discrete_fffl &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"(1,10)\",\n\n    a_r1result = FAIL, b_r1result = FAIL,\n    a_r2result = FAIL, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_discrete_flfl &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"(1,10)\",\n\n    a_r1result = FAIL, b_r1result = LIFT,\n    a_r2result = FAIL, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_discrete_ffll &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"(1,10)\",\n\n    a_r1result = FAIL, b_r1result = FAIL,\n    a_r2result = LIFT, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_discrete_flll &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"(1,10)\",\n\n    a_r1result = FAIL, b_r1result = LIFT,\n    a_r2result = LIFT, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nMCMC_discrete_llll &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"MCMC\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"(1,10)\",\n\n    a_r1result = LIFT, b_r1result = LIFT,\n    a_r2result = LIFT, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nenumerate with discrete prior (1,10)\n\nsuppressWarnings(rwebppl::kill_webppl())\nenumerate_ffff &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"enumerate\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"(1,10)\",\n\n    a_r1result = FAIL, b_r1result = FAIL,\n    a_r2result = FAIL, b_r2result = FAIL\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nenumerate_fffl &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"enumerate\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"(1,10)\",\n\n    a_r1result = FAIL, b_r1result = FAIL,\n    a_r2result = FAIL, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nenumerate_flfl &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"enumerate\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"(1,10)\",\n\n    a_r1result = FAIL, b_r1result = LIFT,\n    a_r2result = FAIL, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nenumerate_ffll &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"enumerate\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"(1,10)\",\n\n    a_r1result = FAIL, b_r1result = FAIL,\n    a_r2result = LIFT, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nenumerate_flll &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"enumerate\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"(1,10)\",\n\n    a_r1result = FAIL, b_r1result = LIFT,\n    a_r2result = LIFT, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\nsuppressWarnings(rwebppl::kill_webppl())\nenumerate_llll &lt;- rwebppl::webppl(program_file = \"webppl vs memo/xiang2023-exp1-round3-with-debugging.wppl\", data=data.frame(\n    method = \"enumerate\",\n    discrete = TRUE,\n    strengthPriorPrecision = 1,\n    strengthPriorVersion = \"(1,10)\",\n\n    a_r1result = LIFT, b_r1result = LIFT,\n    a_r2result = LIFT, b_r2result = LIFT\n), data_var=\"params_df\", random_seed=1)\n\n\n\nsummarize\n\ncompare_results()\n\n[1] \"Now compare visually\"\n# A tibble: 6 × 4\n  scenario MCMC_continuous MCMC_discrete enumerate\n  &lt;chr&gt;              &lt;int&gt;         &lt;int&gt;     &lt;int&gt;\n1 F,F;F,F                0             0         0\n2 F,F;F,L                1             1         1\n3 F,L;F,L                1             1         1\n4 F,F;L,L                1             1         1\n5 F,L;L,L                1             1         1\n6 L,L;L,L                1             1         1\n\n\n\n\n\n\n\n\n\n[1] \"Now separately for each method (or method and agent) and so that we can ensure that there are no missing posteriors\"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n[1] \"Compare all output values across methods\"\n[1] \"Extract all final_table values into a comprehensive summary\"\n# A tibble: 18 × 9\n   scenario method          startingE    aE    bE     aU     bU jointU     P\n   &lt;chr&gt;    &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;\n 1 ffff     MCMC_continuous     0.188  0.15  0.15 -2.02  -2.02   -4.05     0\n 2 fffl     MCMC_continuous    17.5    0     1    13.9    0.375  14.2      1\n 3 flfl     MCMC_continuous    23.4    0.1   0.7  14.1    5.96   20.0      1\n 4 ffll     MCMC_continuous    26.5    1     0     0.375 13.9    14.2      1\n 5 flll     MCMC_continuous    28.9    1     0     0.375 13.9    14.2      1\n 6 llll     MCMC_continuous    30.6    0.6   0.1   7.52  14.3    21.8      1\n 7 ffff     MCMC_discrete       2.54   0     0     0      0       0        0\n 8 fffl     MCMC_discrete      18.0    0     1    13.9    0.375  14.2      1\n 9 flfl     MCMC_discrete      23.5    0.1   0.7  14.1    5.96   20.0      1\n10 ffll     MCMC_discrete      26.5    1     0     0.375 13.9    14.2      1\n11 flll     MCMC_discrete      28.8    1     0     0.375 13.9    14.2      1\n12 llll     MCMC_discrete      30.6    0.6   0.1   7.52  14.3    21.8      1\n13 ffff     enumerate           2.32   0     0     0      0       0        0\n14 fffl     enumerate          17.3    0     1    13.9    0.375  14.2      1\n15 flfl     enumerate          23.0    0.1   0.7  14.1    5.96   20.0      1\n16 ffll     enumerate          26.5    1     0     0.375 13.9    14.2      1\n17 flll     enumerate          28.8    1     0     0.375 13.9    14.2      1\n18 llll     enumerate          30.6    0.6   0.1   7.52  14.3    21.8      1\n# A tibble: 42 × 5\n   scenario variable  MCMC_continuous MCMC_discrete enumerate\n   &lt;chr&gt;    &lt;chr&gt;               &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;\n 1 ffff     startingE           0.188          2.54      2.32\n 2 ffff     aE                  0.15           0         0   \n 3 ffff     bE                  0.15           0         0   \n 4 ffff     aU                 -2.02           0         0   \n 5 ffff     bU                 -2.02           0         0   \n 6 ffff     jointU             -4.05           0         0   \n 7 ffff     P                   0              0         0   \n 8 fffl     startingE          17.5           18.0      17.3 \n 9 fffl     aE                  0              0         0   \n10 fffl     bE                  1              1         1   \n# ℹ 32 more rows\n\n\n\n\n\n\n\n\n\n# A tibble: 18 × 7\n   scenario method             aE    bE      aU      bU jointU\n   &lt;chr&gt;    &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;\n 1 ffff     MCMC_continuous  0.9   0.9   0.0939  0.0939  0.188\n 2 fffl     MCMC_continuous  0.35  0.85 12.1     5.36   17.5  \n 3 flfl     MCMC_continuous  0.5   0.55 12.0    11.4    23.4  \n 4 ffll     MCMC_continuous  0.5   0.5  13.2    13.2    26.5  \n 5 flll     MCMC_continuous  0.4   0.4  14.5    14.5    28.9  \n 6 llll     MCMC_continuous  0.35  0.35 15.3    15.3    30.6  \n 7 ffff     MCMC_discrete    1     1     1.27    1.27    2.54 \n 8 fffl     MCMC_discrete    0.55  0.75 10.3     7.64   18.0  \n 9 flfl     MCMC_discrete    0.5   0.55 12.1    11.4    23.5  \n10 ffll     MCMC_discrete    0.5   0.5  13.2    13.2    26.5  \n11 flll     MCMC_discrete    0.4   0.4  14.4    14.4    28.8  \n12 llll     MCMC_discrete    0.35  0.35 15.3    15.3    30.6  \n13 ffff     enumerate        1     1     1.16    1.16    2.32 \n14 fffl     enumerate        0.35  0.85 12.0     5.27   17.3  \n15 flfl     enumerate        0.35  0.6  13.2     9.79   23.0  \n16 ffll     enumerate        0.5   0.5  13.2    13.2    26.5  \n17 flll     enumerate        0.4   0.4  14.4    14.4    28.8  \n18 llll     enumerate        0.35  0.35 15.3    15.3    30.6  \n# A tibble: 30 × 5\n   scenario variable MCMC_continuous MCMC_discrete enumerate\n   &lt;chr&gt;    &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;\n 1 ffff     aE                0.9             1         1   \n 2 ffff     bE                0.9             1         1   \n 3 ffff     aU                0.0939          1.27      1.16\n 4 ffff     bU                0.0939          1.27      1.16\n 5 ffff     jointU            0.188           2.54      2.32\n 6 fffl     aE                0.35            0.55      0.35\n 7 fffl     bE                0.85            0.75      0.85\n 8 fffl     aU               12.1            10.3      12.0 \n 9 fffl     bU                5.36            7.64      5.27\n10 fffl     jointU           17.5            18.0      17.3 \n# ℹ 20 more rows\n\n\n\n\n\n\n\n\n\nOkay not sure why startingE can be 1 sometimes (excluding 1 and 10 does not fix this for MCMC_discrete). Inspecting using startingE_table"
  }
]